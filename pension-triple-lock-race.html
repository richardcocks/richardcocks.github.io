<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Matching Speed vs. Matching Position: Visualising the Triple Lock's Mathematical Flaw</title>

    <!-- SEO Meta Tags -->
    <meta name="description"
        content="An interactive visualization showing how the UK's pension triple lock contains a mathematical design flaw that has cost taxpayers over ¬£85 billion since 2012.">
    <meta name="keywords"
        content="UK pension, triple lock, state pension, mathematical error, policy design, inflation, earnings growth">
    <meta name="author" content="Rich Harris">

    <!-- Open Graph Meta Tags (Facebook, LinkedIn) -->
    <meta property="og:type" content="website">
    <meta property="og:title"
        content="Matching Speed vs. Matching Position: Visualising the Triple Lock's Mathematical Flaw">
    <meta property="og:description"
        content="An interactive visualization showing how the UK's pension triple lock contains a mathematical design flaw that has cost taxpayers over ¬£85 billion since 2012.">
    <meta property="og:image" content="https://richardcocks.github.io/assets/img/1_Leader.png">
    <meta property="og:url" content="richardcocks.github.io/pension-triple-lock-race.html">
    <meta property="og:site_name" content="Triple Lock Visualization">

    <!-- Twitter Card Meta Tags -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title"
        content="Matching Speed vs. Matching Position: Visualising the Triple Lock's Mathematical Flaw">
    <meta name="twitter:description"
        content="An interactive visualization showing how the UK's pension triple lock contains a mathematical design flaw that has cost taxpayers over ¬£85 billion since 2012.">
    <meta name="twitter:image" content="https://richardcocks.github.io/assets/img/1_Leader.png">
    <meta name="twitter:creator" content="@eterm.bsky.social">

    <!-- Additional Meta Tags -->
    <meta name="robots" content="index, follow">
    <link rel="canonical" href="">
    <style>
        body {
            font-family: Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            background-color: #f5f5f5;
            font-size: 16px;
        }

        h1 {
            color: #333;
        }

        .description {
            max-width: 800px;
            text-align: center;
            margin-bottom: 20px;
            line-height: 1.6;
        }

        #raceTrack {
            background-color: #e8f5e9;
            border-radius: 10px;
            position: relative;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            width: 100%;
            max-width: 800px;
            height: auto;
        }

        .track {
            fill: #666;
            stroke: #333;
            stroke-width: 2;
        }

        .lane-line {
            stroke: white;
            stroke-width: 2;
            stroke-dasharray: 10, 10;
        }

        .start-line {
            stroke: white;
            stroke-width: 4;
            stroke-dasharray: 5, 5;
        }

        .finish-line {
            stroke: white;
            stroke-width: 4;
            stroke-dasharray: 5, 5;
        }

        .lane-label {
            font-size: 14px;
            font-weight: bold;
        }

        .car {
            font-size: 30px;
        }

        .controls {
            margin-top: 20px;
            display: flex;
            gap: 10px;
        }

        button {
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            background-color: #4CAF50;
            color: white;
            border: none;
            border-radius: 5px;
            min-height: 44px;
            min-width: 44px;
        }

        button:hover {
            background-color: #45a049;
        }

        button:disabled {
            background-color: #cccccc;
            cursor: not-allowed;
        }

        .legend {
            margin-top: 20px;
            display: flex;
            gap: 30px;
            flex-wrap: wrap;
            justify-content: center;
        }

        .legend-item {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .legend-car {
            font-size: 24px;
        }

        .stats {
            margin-top: 20px;
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            max-width: 800px;
            width: 100%;
        }

        .stat-card {
            background: white;
            padding: 15px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        .stat-label {
            font-size: 14px;
            color: #666;
            margin-bottom: 5px;
        }

        .stat-value {
            font-size: 24px;
            font-weight: bold;
        }

        .year-display {
            font-size: 24px;
            margin-bottom: 15px;
            font-weight: bold;
            color: #333;
        }

        .data-table {
            margin-top: 30px;
            max-width: 900px;
            width: 100%;
        }

        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }

        .data-table h2 {
            text-align: center;
            margin-bottom: 15px;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            background: white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }

        th,
        td {
            padding: 12px;
            text-align: center;
            border: 1px solid #ddd;
        }

        th {
            background-color: #4CAF50;
            color: white;
            font-weight: bold;
        }

        tr:nth-child(even) {
            background-color: #f9f9f9;
        }

        .winner {
            background-color: #fff9c4;
            font-weight: bold;
        }

        a {
            color: #4CAF50;
            text-decoration: none;
        }

        a:hover {
            text-decoration: underline;
        }

        /* Mobile responsive styles */
        @media (max-width: 768px) {
            body {
                padding: 15px;
            }

            h1 {
                font-size: 24px;
                text-align: center;
            }

            .stats {
                grid-template-columns: repeat(2, 1fr);
                gap: 10px;
            }

            .stat-card {
                padding: 10px;
            }

            .stat-value {
                font-size: 20px;
            }

            .controls {
                flex-wrap: wrap;
                justify-content: center;
            }

            button {
                padding: 12px 16px;
                flex: 1;
                min-width: 100px;
            }

            .legend {
                gap: 15px;
            }

            .legend-item {
                font-size: 14px;
            }

            th,
            td {
                padding: 8px;
                font-size: 14px;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }

            h1 {
                font-size: 20px;
            }

            .stats {
                grid-template-columns: 1fr;
                gap: 10px;
            }

            .description,
            .data-table {
                font-size: 14px;
            }

            .year-display {
                font-size: 20px;
            }

            button {
                font-size: 14px;
                padding: 10px 12px;
            }

            .controls {
                gap: 5px;
                width: 100%;
            }

            .legend {
                flex-direction: column;
                gap: 10px;
            }

            th,
            td {
                padding: 6px 4px;
                font-size: 12px;
            }

            .lane-label {
                font-size: 12px;
            }

            .car {
                font-size: 24px;
            }
        }
    </style>
</head>

<body>
    <h1>Matching Speed vs. Matching Position: Visualising the Triple Lock's Mathematical Flaw</h1>

    <div style="max-width: 900px; margin: 0 auto 30px; text-align: left; line-height: 1.6;">
        <p>Imagine that you've been tasked with instructing a camera drone to follow the leader in a race.</p>

        <p>Without thinking too much, you write down the instructions:
        <blockquote>At any moment, match the speed of whichever racer is currently going fastest.</blockquote>
        </p>

        <p>Before too long, the drone is flying around more than a full lap ahead of every racer.
        </p>
        <p>
            What went wrong?
            The drone continuously matched whichever racer was going fastest at that moment. Whenever a racer sped up
            and pulled away, the drone gained ground over the pack. When the front-runner slowed for corners, the drone
            matched a car still on the straight.
        </p>
        <p>
            Any distance gained on the leader was baked in permanently. It kept every advantage, never giving any back,
            because the front-runner could never go faster than the drone and therefore could never make up lost ground.
        </p>

        <p>The mistake made is confusing <strong>matching speed</strong> with <strong>matching position</strong>. The
            drone was mathematically guaranteed to fly ahead by cherry-picking the best speed.</p>

        <p>
            The UK Treasury <em>made this same mistake</em>, and it has been costing the UK billions:
        </p>
    </div>

    <div class="year-display" id="yearDisplay">Year: 2011 (baseline)</div>

    <svg id="raceTrack" viewBox="0 0 800 400" preserveAspectRatio="xMidYMid meet">
        <!-- Race track with lanes -->
        <rect class="track" x="50" y="50" width="700" height="300" rx="10" />

        <!-- Lane dividers -->
        <line class="lane-line" x1="50" y1="125" x2="750" y2="125" />
        <line class="lane-line" x1="50" y1="200" x2="750" y2="200" />
        <line class="lane-line" x1="50" y1="275" x2="750" y2="275" />

        <!-- Start line -->
        <line class="start-line" x1="80" y1="50" x2="80" y2="350" />

        <!-- Finish line -->
        <line class="finish-line" x1="720" y1="50" x2="720" y2="350" />

        <!-- Leader line (for max of CPI/Earnings/2.5%) -->
        <line id="leaderLine" x1="80" y1="50" x2="80" y2="350" stroke="white" stroke-width="3" stroke-dasharray="5,5" />
        <text id="leaderLabel" x="80" y="365" fill="white" font-size="12" font-weight="bold" text-anchor="middle"
            style="text-shadow: 1px 1px 2px rgba(0,0,0,0.8);">Leader</text>

        <!-- Pension line (showing gold car position) -->
        <line id="pensionLine" x1="80" y1="50" x2="80" y2="350" stroke="#f57f17" stroke-width="3"
            stroke-dasharray="5,5" />
        <text id="pensionLabel" x="80" y="380" fill="#f57f17" font-size="12" font-weight="bold"
            text-anchor="middle">Pension</text>

        <!-- Lane labels -->
        <text class="lane-label" x="10" y="92" fill="#d32f2f">CPI</text>
        <text class="lane-label" x="10" y="167" fill="#1976d2">Earn.</text>
        <text class="lane-label" x="10" y="242" fill="#388e3c">2.5%</text>
        <text class="lane-label" x="10" y="317" fill="#f57f17">Pen.</text>

        <!-- Cars -->
        <text id="redCar" class="car" x="0" y="0">üèéÔ∏è</text>
        <text id="blueCar" class="car" x="0" y="0">üèéÔ∏è</text>
        <text id="greenCar" class="car" x="0" y="0">üèéÔ∏è</text>
        <text id="goldCar" class="car" x="0" y="0">üèéÔ∏è</text>
    </svg>

    <div style="text-align: center; font-size: 10px; color: #999; margin-top: 5px;">
        Note: Track uses logarithmic scale - constant percentage growth appears as constant speed
    </div>

    <div class="controls">
        <button id="startBtn" onclick="startRace()">Start Race</button>
        <button id="pauseBtn" onclick="pauseRace()" disabled>Pause</button>
        <button id="resetBtn" onclick="resetRace()">Reset</button>
    </div>

    <div style="margin-top: 20px; max-width: 800px; width: 100%;">
        <label for="yearSlider" style="font-weight: bold; margin-bottom: 10px; display: block;">Scrub through
            years:</label>
        <input type="range" id="yearSlider" min="-1" max="14" value="-1" step="1" style="width: 100%; cursor: pointer;"
            oninput="scrubToYear(this.value)">
        <div style="display: flex; justify-content: space-between; font-size: 12px; color: #666; margin-top: 5px;">
            <span>Start</span>
            <span>2012</span>
            <span>2026</span>
        </div>
    </div>

    <div class="legend">
        <div class="legend-item">
            <span class="legend-car" style="filter: hue-rotate(0deg);">üèéÔ∏è</span>
            <span>Red: Inflation (variable)</span>
        </div>
        <div class="legend-item">
            <span class="legend-car" style="filter: hue-rotate(200deg);">üèéÔ∏è</span>
            <span>Blue: Earnings Growth (variable)</span>
        </div>
        <div class="legend-item">
            <span class="legend-car" style="filter: hue-rotate(100deg);">üèéÔ∏è</span>
            <span>Green: 2.5% Floor</span>
        </div>
        <div class="legend-item">
            <span class="legend-car" style="filter: hue-rotate(45deg) brightness(1.5);">üèéÔ∏è</span>
            <span>Gold: Pension (locked to fastest speed)</span>
        </div>
    </div>

    <div class="stats">
        <div class="stat-card">
            <div class="stat-label">Red Position</div>
            <div class="stat-value" id="redPos" style="color: #d32f2f;">100</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Blue Position</div>
            <div class="stat-value" id="bluePos" style="color: #1976d2;">100</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Green Position</div>
            <div class="stat-value" id="greenPos" style="color: #388e3c;">100</div>
        </div>
        <div class="stat-card">
            <div class="stat-label">Gold Position</div>
            <div class="stat-value" id="goldPos" style="color: #f57f17;">100</div>
        </div>
    </div>

    <div
        style="max-width: 900px; margin: 30px auto; padding: 20px; background: #fff3cd; border-left: 5px solid #ffc107; border-radius: 5px;">
        <p style="margin: 0; font-size: 18px; font-weight: bold; color: #856404;">Watch the gold pension car pull ahead
            of all three racers. The UK government made exactly this mistake and it has cost taxpayers over ¬£85
            billion so far.</p>
    </div>

    <div class="description" style="max-width: 900px; margin: 0 auto 30px; text-align: center; line-height: 1.6;">
        <p><strong>A multi-billion pound mistake:</strong> The UK state pension "triple lock" contains a mathematical
            design mistake that has
            cost taxpayers tens of billions since 2012. The policy sounds simple: increase pensions each year by
            whichever is highest -
            CPI inflation, average earnings growth, or 2.5%. But there's a critical flaw in the mathematical
            formulation.</p>

        <p><strong>What "triple lock" should mean:</strong> If pensions are "locked" to three measures, you'd expect:
            <code>Pension = MAX(CPI index, Earnings index, 2.5% index)</code>. This would ensure pensions genuinely
            track the highest measure.
        </p>

        <p><strong>What it actually does:</strong> Instead, it takes the <em>rate</em> (delta) from whichever is highest
            each year:
            <code>Pension<sub>t</sub> = Pension<sub>t-1</sub> √ó (1 + MAX(CPI rate, Earnings rate, 2.5%))</code>. This
            creates a ratchet effect where pensions
            borrow growth from whichever grows fastest, but never gives it back, compounding ahead of <em>all three</em>
            measures.
        </p>

        <p><strong>The mathematical mistake:</strong> By locking to <em>rates</em> instead of <em>indexes</em>, the
            policy cherry-picks
            the best performance from each measure annually. A true "lock" would mean matching the position of the
            leader. Instead,
            pensions exceed all three measures they're supposedly locked to.</p>
    </div>

    <div
        style="margin-top: 15px; padding: 15px; background-color: #ffebee; border-left: 4px solid #d32f2f; font-size: 16px; text-align: center;">
        <strong>Estimated Cumulative Overspend (2012-2026):</strong> <span
            style="color: #d32f2f; font-size: 18px; font-weight: bold;">¬£85.2bn</span>
    </div>

    <div class="data-table">
        <h2>Historical UK Triple Lock Data (2012-2026)</h2>
        <p style="text-align: center; font-size: 14px; color: #666; margin-bottom: 10px;">
            <strong>CPI data:</strong> <a
                href="https://www.ons.gov.uk/economy/inflationandpriceindices/timeseries/d7bt/mm23"
                target="_blank">ONS Consumer Price Inflation</a><br>
            <strong>Analysis:</strong> <a
                href="https://ifs.org.uk/articles/what-are-effects-triple-lock-and-how-could-it-be-reformed"
                target="_blank">IFS - Effects of the Triple Lock</a><br>
            <strong>Spending figures:</strong> <a
                href="https://www.gov.uk/government/collections/benefit-expenditure-tables" target="_blank">DWP Benefit
                Expenditure and Caseload Tables</a> (outturn data 2012/13-2023/24, forecast 2024/25-2025/26)
        </p>
        <div class="table-container">
            <table id="dataTable">
                <thead>
                    <tr>
                        <th>Year</th>
                        <th>CPI Inflation (%)</th>
                        <th>Earnings Growth (%)</th>
                        <th>2.5% Floor</th>
                        <th>Pension Increase (%)</th>
                        <th>CPI Index</th>
                        <th>Earnings Index</th>
                        <th>2.5% Index</th>
                        <th>Pension Index (as implemented)</th>
                        <th>Leader Index (what it should be)</th>
                        <th>Gap = Error (index points)</th>
                        <th>Pension Spend (¬£bn)</th>
                        <th>Estimated Annual Overspend (¬£bn)</th>
                    </tr>
                </thead>
                <tbody id="dataTableBody">
                    <tr>
                        <td>2012</td>
                        <td class="winner">5.2%</td>
                        <td>2.8%</td>
                        <td>2.5%</td>
                        <td class="winner">5.2%</td>
                        <td>105.2</td>
                        <td>102.8</td>
                        <td>102.5</td>
                        <td><strong>105.2</strong></td>
                        <td>105.2</td>
                        <td style="color: #388e3c; font-weight: bold;">0.0</td>
                        <td>¬£79.8bn</td>
                        <td style="color: #388e3c; font-weight: bold;">¬£0.0bn</td>
                    </tr>
                    <tr>
                        <td>2013</td>
                        <td>2.2%</td>
                        <td>1.6%</td>
                        <td class="winner">2.5%</td>
                        <td class="winner">2.5%</td>
                        <td>107.5</td>
                        <td>104.4</td>
                        <td>105.1</td>
                        <td><strong>107.8</strong></td>
                        <td>107.5</td>
                        <td style="color: #d32f2f; font-weight: bold;">+0.3</td>
                        <td>¬£83.1bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+0.2bn</td>
                    </tr>
                    <tr>
                        <td>2014</td>
                        <td class="winner">2.7%</td>
                        <td>1.2%</td>
                        <td>2.5%</td>
                        <td class="winner">2.7%</td>
                        <td>110.4</td>
                        <td>105.7</td>
                        <td>107.7</td>
                        <td><strong>110.7</strong></td>
                        <td>110.4</td>
                        <td style="color: #d32f2f; font-weight: bold;">+0.3</td>
                        <td>¬£86.5bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+0.3bn</td>
                    </tr>
                    <tr>
                        <td>2015</td>
                        <td>1.2%</td>
                        <td>0.6%</td>
                        <td class="winner">2.5%</td>
                        <td class="winner">2.5%</td>
                        <td>111.7</td>
                        <td>106.3</td>
                        <td>110.4</td>
                        <td><strong>113.5</strong></td>
                        <td>111.7</td>
                        <td style="color: #d32f2f; font-weight: bold;">+1.8</td>
                        <td>¬£89.4bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+1.4bn</td>
                    </tr>
                    <tr>
                        <td>2016</td>
                        <td>-0.1%</td>
                        <td class="winner">2.9%</td>
                        <td>2.5%</td>
                        <td class="winner">2.9%</td>
                        <td>111.6</td>
                        <td>109.4</td>
                        <td>113.1</td>
                        <td><strong>116.8</strong></td>
                        <td>113.1</td>
                        <td style="color: #d32f2f; font-weight: bold;">+3.7</td>
                        <td>¬£91.6bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+3.0bn</td>
                    </tr>
                    <tr>
                        <td>2017</td>
                        <td>1.0%</td>
                        <td>2.4%</td>
                        <td class="winner">2.5%</td>
                        <td class="winner">2.5%</td>
                        <td>112.7</td>
                        <td>112.0</td>
                        <td>116.0</td>
                        <td><strong>119.7</strong></td>
                        <td>116.0</td>
                        <td style="color: #d32f2f; font-weight: bold;">+3.8</td>
                        <td>¬£93.8bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+2.9bn</td>
                    </tr>
                    <tr>
                        <td>2018</td>
                        <td class="winner">3.0%</td>
                        <td>2.3%</td>
                        <td>2.5%</td>
                        <td class="winner">3.0%</td>
                        <td>116.1</td>
                        <td>114.6</td>
                        <td>118.9</td>
                        <td><strong>123.3</strong></td>
                        <td>118.9</td>
                        <td style="color: #d32f2f; font-weight: bold;">+4.4</td>
                        <td>¬£96.7bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+3.5bn</td>
                    </tr>
                    <tr>
                        <td>2019</td>
                        <td>2.4%</td>
                        <td class="winner">2.6%</td>
                        <td>2.5%</td>
                        <td class="winner">2.6%</td>
                        <td>118.9</td>
                        <td>117.6</td>
                        <td>121.8</td>
                        <td><strong>126.5</strong></td>
                        <td>121.8</td>
                        <td style="color: #d32f2f; font-weight: bold;">+4.7</td>
                        <td>¬£98.8bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+3.7bn</td>
                    </tr>
                    <tr>
                        <td>2020</td>
                        <td>1.7%</td>
                        <td class="winner">3.9%</td>
                        <td>2.5%</td>
                        <td class="winner">3.9%</td>
                        <td>120.9</td>
                        <td>122.2</td>
                        <td>124.9</td>
                        <td><strong>131.5</strong></td>
                        <td>124.9</td>
                        <td style="color: #d32f2f; font-weight: bold;">+6.6</td>
                        <td>¬£102.0bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+5.1bn</td>
                    </tr>
                    <tr>
                        <td>2021</td>
                        <td>0.5%</td>
                        <td>-1.0%</td>
                        <td class="winner">2.5%</td>
                        <td class="winner">2.5%</td>
                        <td>121.5</td>
                        <td>121.0</td>
                        <td>128.0</td>
                        <td><strong>134.7</strong></td>
                        <td>128.0</td>
                        <td style="color: #d32f2f; font-weight: bold;">+6.7</td>
                        <td>¬£104.7bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+5.2bn</td>
                    </tr>
                    <tr>
                        <td>2022*</td>
                        <td>3.1%</td>
                        <td class="winner">8.3%</td>
                        <td>2.5%</td>
                        <td class="winner">3.1%</td>
                        <td>125.3</td>
                        <td>131.0</td>
                        <td>131.2</td>
                        <td><strong>138.9</strong></td>
                        <td>131.2</td>
                        <td style="color: #d32f2f; font-weight: bold;">+7.7</td>
                        <td>¬£110.5bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+6.1bn</td>
                    </tr>
                    <tr>
                        <td>2023</td>
                        <td class="winner">10.1%</td>
                        <td>5.5%</td>
                        <td>2.5%</td>
                        <td class="winner">10.1%</td>
                        <td>138.0</td>
                        <td>138.2</td>
                        <td>134.5</td>
                        <td><strong>152.9</strong></td>
                        <td>138.2</td>
                        <td style="color: #d32f2f; font-weight: bold;">+14.7</td>
                        <td>¬£124.1bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+12.0bn</td>
                    </tr>
                    <tr>
                        <td>2024</td>
                        <td>6.7%</td>
                        <td class="winner">8.5%</td>
                        <td>2.5%</td>
                        <td class="winner">8.5%</td>
                        <td>147.2</td>
                        <td>150.0</td>
                        <td>137.9</td>
                        <td><strong>165.9</strong></td>
                        <td>150.0</td>
                        <td style="color: #d32f2f; font-weight: bold;">+16.0</td>
                        <td>¬£136.4bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+13.1bn</td>
                    </tr>
                    <tr>
                        <td>2025</td>
                        <td>1.7%</td>
                        <td class="winner">4.1%</td>
                        <td>2.5%</td>
                        <td class="winner">4.1%</td>
                        <td>149.7</td>
                        <td>156.1</td>
                        <td>141.3</td>
                        <td><strong>172.8</strong></td>
                        <td>156.1</td>
                        <td style="color: #d32f2f; font-weight: bold;">+16.6</td>
                        <td>¬£145.6bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+14.0bn</td>
                    </tr>
                    <tr>
                        <td>2026</td>
                        <td>3.8%</td>
                        <td class="winner">4.8%</td>
                        <td>2.5%</td>
                        <td class="winner">4.8%</td>
                        <td>155.4</td>
                        <td>163.6</td>
                        <td>144.8</td>
                        <td><strong>181.0</strong></td>
                        <td>163.6</td>
                        <td style="color: #d32f2f; font-weight: bold;">+17.4</td>
                        <td>¬£153.2bn</td>
                        <td style="color: #d32f2f; font-weight: bold;">¬£+14.8bn</td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p style="font-size: 12px; color: #666; margin-top: 10px; font-style: italic;">
            *In 2022, the triple lock was temporarily suspended and only the earnings element was excluded. Pensions
            increased by 3.1% (CPI) instead of 8.3% (earnings growth), which was unusually high due to pandemic-related
            statistical distortions.
        </p>

    </div>


    <script>
        // Track dimensions
        const startX = 80;
        const carOffset = 15; // Car emoji centering offset
        const targetFinishX = 700; // Where we want the car to finish (x position)
        // We need: targetFinishX = startX + xPos - carOffset
        // So: xPos = targetFinishX - startX + carOffset = 700 - 80 + 15 = 635
        const maxXPos = targetFinishX - startX + carOffset;
        const laneY = {
            red: 87,      // CPI lane
            blue: 162,    // Earnings lane
            green: 237,   // 2.5% floor lane
            gold: 312     // Pension lane
        };

        let animationId = null;
        let currentYearIndex = 0;
        let frameInYear = 0;
        const framesPerYear = 60;

        // Historical data from 2012-2026 (rates in %)
        // CPI Source: ONS Consumer Price Inflation (D7BT series)
        // Reference: https://www.ons.gov.uk/economy/inflationandpriceindices/timeseries/d7bt/mm23
        const historicalData = [
            { year: 2012, cpi: 5.2, earnings: 2.8, floor: 2.5, pension: 5.2 },
            { year: 2013, cpi: 2.2, earnings: 1.6, floor: 2.5, pension: 2.5 },
            { year: 2014, cpi: 2.7, earnings: 1.2, floor: 2.5, pension: 2.7 },
            { year: 2015, cpi: 1.2, earnings: 0.6, floor: 2.5, pension: 2.5 },
            { year: 2016, cpi: -0.1, earnings: 2.9, floor: 2.5, pension: 2.9 },
            { year: 2017, cpi: 1.0, earnings: 2.4, floor: 2.5, pension: 2.5 },
            { year: 2018, cpi: 3.0, earnings: 2.3, floor: 2.5, pension: 3.0 },
            { year: 2019, cpi: 2.4, earnings: 2.6, floor: 2.5, pension: 2.6 },
            { year: 2020, cpi: 1.7, earnings: 3.9, floor: 2.5, pension: 3.9 },
            { year: 2021, cpi: 0.5, earnings: -1.0, floor: 2.5, pension: 2.5 },
            { year: 2022, cpi: 3.1, earnings: 8.3, floor: 2.5, pension: 3.1 }, // Triple lock suspended (earnings element only)
            { year: 2023, cpi: 10.1, earnings: 5.5, floor: 2.5, pension: 10.1 },
            { year: 2024, cpi: 6.7, earnings: 8.5, floor: 2.5, pension: 8.5 },
            { year: 2025, cpi: 1.7, earnings: 4.1, floor: 2.5, pension: 4.1 },
            { year: 2026, cpi: 3.8, earnings: 4.8, floor: 2.5, pension: 4.8 }
        ];

        // Position values (start at 100, like an index)
        let positions = {
            red: 100,
            blue: 100,
            green: 100,
            gold: 100
        };

        // X positions on track (pixels from start)
        let xPositions = {
            red: 0,
            blue: 0,
            green: 0,
            gold: 0
        };

        // Table data is now static HTML - see tbody in the HTML above

        function getCurrentRates() {
            if (currentYearIndex >= historicalData.length) {
                return null;
            }
            return historicalData[currentYearIndex];
        }

        function updateCarPosition(carId, xPos, yPos, color) {
            const car = document.getElementById(carId);
            car.setAttribute('x', startX + xPos - 15);
            car.setAttribute('y', yPos + 10);

            // Apply color filter
            if (color === 'red') {
                car.style.filter = 'hue-rotate(0deg) brightness(1.2)';
            } else if (color === 'blue') {
                car.style.filter = 'hue-rotate(200deg) brightness(1.2)';
            } else if (color === 'green') {
                car.style.filter = 'hue-rotate(100deg) brightness(1.2)';
            } else {
                car.style.filter = 'hue-rotate(45deg) brightness(1.5)';
            }
        }

        function updateStats() {
            document.getElementById('redPos').textContent = positions.red.toFixed(1);
            document.getElementById('bluePos').textContent = positions.blue.toFixed(1);
            document.getElementById('greenPos').textContent = positions.green.toFixed(1);
            document.getElementById('goldPos').textContent = positions.gold.toFixed(1);

            if (currentYearIndex < 0) {
                document.getElementById('yearDisplay').textContent = `Year: 2011 (baseline)`;
            } else if (currentYearIndex < historicalData.length) {
                document.getElementById('yearDisplay').textContent = `Year: ${historicalData[currentYearIndex].year}`;
            } else {
                document.getElementById('yearDisplay').textContent = `Year: Complete`;
            }
        }

        function animate() {
            const rates = getCurrentRates();

            if (!rates) {
                // Race is complete
                pauseRace();
                return;
            }

            frameInYear += 1;

            // Calculate progress through the current year (0 to 1)
            const yearProgress = frameInYear / framesPerYear;

            // Calculate positions at this point in time
            // Start from the position at the beginning of the current year
            let yearStartPositions = { red: 100, blue: 100, green: 100, gold: 100 };

            // Apply all previous years' growth
            for (let i = 0; i < currentYearIndex; i++) {
                const data = historicalData[i];
                yearStartPositions.red *= (1 + data.cpi / 100);
                yearStartPositions.blue *= (1 + data.earnings / 100);
                yearStartPositions.green *= (1 + data.floor / 100);
                yearStartPositions.gold *= (1 + data.pension / 100);
            }

            // Apply partial growth for the current year
            positions.red = yearStartPositions.red * Math.pow(1 + rates.cpi / 100, yearProgress);
            positions.blue = yearStartPositions.blue * Math.pow(1 + rates.earnings / 100, yearProgress);
            positions.green = yearStartPositions.green * Math.pow(1 + rates.floor / 100, yearProgress);
            positions.gold = yearStartPositions.gold * Math.pow(1 + rates.pension / 100, yearProgress);

            // Calculate x positions based on index values (logarithmic scale)
            // Calculate final gold position to scale track properly
            let finalGoldIndex = 100;
            for (let i = 0; i < historicalData.length; i++) {
                finalGoldIndex *= (1 + historicalData[i].pension / 100);
            }

            // Scale so gold reaches finish line in 2025 (using log scale)
            const scale = maxXPos / Math.log(finalGoldIndex / 100);

            xPositions.red = Math.log(positions.red / 100) * scale;
            xPositions.blue = Math.log(positions.blue / 100) * scale;
            xPositions.green = Math.log(positions.green / 100) * scale;
            xPositions.gold = Math.log(positions.gold / 100) * scale;

            // Update car positions on track
            updateCarPosition('redCar', xPositions.red, laneY.red, 'red');
            updateCarPosition('blueCar', xPositions.blue, laneY.blue, 'blue');
            updateCarPosition('greenCar', xPositions.green, laneY.green, 'green');
            updateCarPosition('goldCar', xPositions.gold, laneY.gold, 'gold');

            // Update leader line position (max of red, blue, green)
            const maxTriplePos = Math.max(xPositions.red, xPositions.blue, xPositions.green);
            const leaderLine = document.getElementById('leaderLine');
            const leaderLabel = document.getElementById('leaderLabel');
            leaderLine.setAttribute('x1', startX + maxTriplePos);
            leaderLine.setAttribute('x2', startX + maxTriplePos);
            leaderLabel.setAttribute('x', startX + maxTriplePos);

            // Update pension line position (gold car)
            const pensionLine = document.getElementById('pensionLine');
            const pensionLabel = document.getElementById('pensionLabel');
            pensionLine.setAttribute('x1', startX + xPositions.gold);
            pensionLine.setAttribute('x2', startX + xPositions.gold);
            pensionLabel.setAttribute('x', startX + xPositions.gold);

            updateStats();

            // Move to next year when frames complete
            if (frameInYear >= framesPerYear) {
                frameInYear = 0;
                currentYearIndex += 1;

                // If we've finished the last year, stop the animation
                if (currentYearIndex >= historicalData.length) {
                    // Clamp positions to final values to prevent overshoot
                    currentYearIndex = historicalData.length - 1;
                    frameInYear = framesPerYear;
                    pauseRace();
                    return;
                }

                // Update slider position
                document.getElementById('yearSlider').value = currentYearIndex;
            }

            animationId = requestAnimationFrame(animate);
        }

        function startRace() {
            if (!animationId) {
                // If we're not at the start or partway through, reset first
                if (currentYearIndex < 0) {
                    currentYearIndex = 0;
                    frameInYear = 0;
                    positions = { red: 100, blue: 100, green: 100, gold: 100 };
                    // Update slider to reflect we're now on year 0 (2012)
                    document.getElementById('yearSlider').value = 0;
                }

                animate();
                document.getElementById('startBtn').disabled = true;
                document.getElementById('pauseBtn').disabled = false;
            }
        }

        function pauseRace() {
            if (animationId) {
                cancelAnimationFrame(animationId);
                animationId = null;
                document.getElementById('startBtn').disabled = false;
                document.getElementById('pauseBtn').disabled = true;
            }
        }

        function resetRace() {
            pauseRace();
            currentYearIndex = -1;
            frameInYear = 0;
            positions = { red: 100, blue: 100, green: 100, gold: 100 };
            xPositions = { red: 0, blue: 0, green: 0, gold: 0 };

            updateCarPosition('redCar', 0, laneY.red, 'red');
            updateCarPosition('blueCar', 0, laneY.blue, 'blue');
            updateCarPosition('greenCar', 0, laneY.green, 'green');
            updateCarPosition('goldCar', 0, laneY.gold, 'gold');

            // Reset leader line position
            const leaderLine = document.getElementById('leaderLine');
            const leaderLabel = document.getElementById('leaderLabel');
            leaderLine.setAttribute('x1', startX);
            leaderLine.setAttribute('x2', startX);
            leaderLabel.setAttribute('x', startX);

            // Reset pension line position
            const pensionLine = document.getElementById('pensionLine');
            const pensionLabel = document.getElementById('pensionLabel');
            pensionLine.setAttribute('x1', startX);
            pensionLine.setAttribute('x2', startX);
            pensionLabel.setAttribute('x', startX);

            updateStats();

            document.getElementById('startBtn').disabled = false;
            document.getElementById('yearSlider').value = -1;
        }

        function scrubToYear(yearIndex) {
            pauseRace();

            yearIndex = parseInt(yearIndex);

            // Reset positions to start
            positions = { red: 100, blue: 100, green: 100, gold: 100 };

            // If yearIndex is -1 (start position), don't apply any growth
            if (yearIndex >= 0) {
                // Apply growth for each year up to and including the selected year
                for (let i = 0; i <= yearIndex; i++) {
                    const data = historicalData[i];
                    positions.red *= (1 + data.cpi / 100);
                    positions.blue *= (1 + data.earnings / 100);
                    positions.green *= (1 + data.floor / 100);
                    positions.gold *= (1 + data.pension / 100);
                }
            }

            // Calculate final gold position for scaling (logarithmic scale)
            let finalGoldIndex = 100;
            for (let i = 0; i < historicalData.length; i++) {
                finalGoldIndex *= (1 + historicalData[i].pension / 100);
            }

            // Scale positions so gold reaches finish line in 2025 (using log scale)
            const scale = maxXPos / Math.log(finalGoldIndex / 100);
            xPositions.red = Math.log(positions.red / 100) * scale;
            xPositions.blue = Math.log(positions.blue / 100) * scale;
            xPositions.green = Math.log(positions.green / 100) * scale;
            xPositions.gold = Math.log(positions.gold / 100) * scale;

            // Update car positions
            updateCarPosition('redCar', xPositions.red, laneY.red, 'red');
            updateCarPosition('blueCar', xPositions.blue, laneY.blue, 'blue');
            updateCarPosition('greenCar', xPositions.green, laneY.green, 'green');
            updateCarPosition('goldCar', xPositions.gold, laneY.gold, 'gold');

            // Update leader line position (max of red, blue, green)
            const maxTriplePos = Math.max(xPositions.red, xPositions.blue, xPositions.green);
            const leaderLine = document.getElementById('leaderLine');
            const leaderLabel = document.getElementById('leaderLabel');
            leaderLine.setAttribute('x1', startX + maxTriplePos);
            leaderLine.setAttribute('x2', startX + maxTriplePos);
            leaderLabel.setAttribute('x', startX + maxTriplePos);

            // Update pension line position (gold car)
            const pensionLine = document.getElementById('pensionLine');
            const pensionLabel = document.getElementById('pensionLabel');
            pensionLine.setAttribute('x1', startX + xPositions.gold);
            pensionLine.setAttribute('x2', startX + xPositions.gold);
            pensionLabel.setAttribute('x', startX + xPositions.gold);

            // Update current year index
            currentYearIndex = parseInt(yearIndex);
            frameInYear = 0;

            // Update display
            if (currentYearIndex < 0) {
                document.getElementById('yearDisplay').textContent = `Year: 2011 (baseline)`;
            } else if (currentYearIndex < historicalData.length) {
                document.getElementById('yearDisplay').textContent = `Year: ${historicalData[currentYearIndex].year}`;
            } else {
                document.getElementById('yearDisplay').textContent = `Year: Complete`;
            }
            updateStats();
        }

        // Initialize
        resetRace();
    </script>
</body>

</html>